<div class="selfie-page">
  <div class="selfie-page__container">
    <app-navigation
      [backButtonText]="getText('identity.common.backButton')"
      (backClick)="goBack()"
    ></app-navigation>

    <main class="selfie-page__main">
      <app-title-section
        [titlePrefix]="getText('identity.selfie.title.prefix')"
        [titleHighlight]="getText('identity.selfie.title.highlight')"
        [showSuccess]="isCaptured"
        [successTitle]="getText('identity.selfie.success.title')"
      ></app-title-section>

      <div class="selfie-page__camera-container">
        <app-camera
          type="selfie"
          [isActive]="isCameraActive && !isCaptured"
          (imageCaptured)="onImageCaptured($event)"
          (cameraError)="onCameraError($event)"
        ></app-camera>
      </div>
    </main>

    @if (errorMessage) {
    <div class="selfie-page__error">
      <p class="selfie-page__error__message">{{ errorMessage }}</p>
      <button class="selfie-page__error__retry" (click)="retryCapture()">
        {{ getText('identity.common.retry') }}
      </button>
      <button
        class="selfie-page__error__permissions"
        (click)="requestPermissions()"
      >
        Solicitar Permisos de CÃ¡mara
      </button>
    </div>
    }
  </div>
</div>
